



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Manual for native XR APIs">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>XR SDK stats - XR SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../img/extra.css">
    
      <link rel="stylesheet" href="../../img/toggle.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#xr-sdk-stats" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../index.html" title="XR SDK" class="md-header-nav__button md-logo">
          
            <img src="../../img/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                XR SDK
              </span>
              <span class="md-header-nav__topic">
                XR SDK stats
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="XR SDK" class="md-nav__button md-logo">
      
        <img src="../../img/logo.png" width="48" height="48">
      
    </a>
    XR SDK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../index.html" title="XR SDK Home" class="md-nav__link">
      XR SDK Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Preinit
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Preinit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../preinit/index.html" title="XR SDK PreInit Interface" class="md-nav__link">
      XR SDK PreInit Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../preinit/changelog.html" title="PreInit Changelog" class="md-nav__link">
      PreInit Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../preinit/known-issues.html" title="Known issues" class="md-nav__link">
      Known issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2">
      Stats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Stats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        XR SDK stats
      </label>
    
    <a href="index.html" title="XR SDK stats" class="md-nav__link md-nav__link--active">
      XR SDK stats
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-safety" title="Thread safety" class="md-nav__link">
    Thread safety
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exposing-stats-to-users" title="Exposing stats to users" class="md-nav__link">
    Exposing stats to users
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="changelog.html" title="Stats Changelog" class="md-nav__link">
      Stats Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="known-issues.html" title="Known issues" class="md-nav__link">
      Known issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Provider setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Provider setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../provider-setup/provider-setup.html" title="Creating an XR Provider" class="md-nav__link">
      Creating an XR Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../provider-setup/unity-subsystems-manifest-json.html" title="UnitySubsystemsManifest.json" class="md-nav__link">
      UnitySubsystemsManifest.json
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Runtime discovery
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Runtime discovery
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../runtime-discovery/runtime-discovery.html" title="Runtime discovery and activation of subsystems" class="md-nav__link">
      Runtime discovery and activation of subsystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../runtime-discovery/troubleshooting.html" title="Troubleshooting plug-in discovery at runtime" class="md-nav__link">
      Troubleshooting plug-in discovery at runtime
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Samples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../samples/samples.html" title="Samples" class="md-nav__link">
      Samples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Subsystems
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Subsystems
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      Display
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        Display
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/display/index.html" title="XR SDK Display subsystem" class="md-nav__link">
      XR SDK Display subsystem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/display/changelog.html" title="Display Changelog" class="md-nav__link">
      Display Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/display/known-issues.html" title="Known Issues" class="md-nav__link">
      Known Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      Input
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        Input
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/input/index.html" title="XR Input Subsystem" class="md-nav__link">
      XR Input Subsystem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/input/changelog.html" title="Input Changelog" class="md-nav__link">
      Input Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/input/known-issues.html" title="Known Issues" class="md-nav__link">
      Known Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Meshing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Meshing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../subsystems/meshing/index.html" title="XR SDK Meshing subsystem" class="md-nav__link">
      XR SDK Meshing subsystem
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-safety" title="Thread safety" class="md-nav__link">
    Thread safety
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" title="Limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exposing-stats-to-users" title="Exposing stats to users" class="md-nav__link">
    Exposing stats to users
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="xr-sdk-stats">XR SDK stats<a class="headerlink" href="#xr-sdk-stats" title="Permanent link">&para;</a></h1>
<p><a href="changelog.html">Changelog</a></p>
<p>This is an interface for registering and managing statistics data</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Use the XR Stats interface to record stats among the various subsystems.  The only supported stat primitive is a floating point number.</p>
<p>Use the <code>UnityPluginLoad</code> entry point method to acquire a pointer to the XRStats interface.</p>
<div class="codehilite"><pre><span></span><span class="n">IUnityXRStats</span><span class="o">*</span> <span class="n">sXRStats</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>

<span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="kt">void</span> <span class="n">UNITY_INTERFACE_EXPORT</span> <span class="n">UnityPluginLoad</span><span class="p">(</span><span class="n">IUnityInterfaces</span><span class="o">*</span> <span class="n">unityInterfaces</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sXRStats</span> <span class="o">=</span> <span class="p">(</span><span class="n">IUnityXRStats</span><span class="o">*</span><span class="p">)</span><span class="n">unityInterfaces</span><span class="o">-&gt;</span><span class="n">GetInterface</span><span class="p">(</span><span class="n">UNITY_GET_INTERFACE_GUID</span><span class="p">(</span><span class="n">IUnityXRStats</span><span class="p">));</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>


<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>Register your subsystem and individual stat definitions with the stats interface:</p>
<div class="codehilite"><pre><span></span><span class="k">static</span> <span class="n">UnityXRStatId</span> <span class="n">m_GPUFrameTimeID</span><span class="p">;</span>
<span class="k">static</span> <span class="n">UnityXRStatId</span> <span class="n">m_DroppedFrameCountID</span><span class="p">;</span>
<span class="k">static</span> <span class="n">UnityXRStatId</span> <span class="n">m_WorkThreadStat</span><span class="p">;</span>

<span class="k">static</span> <span class="n">UnitySubsystemErrorCode</span> <span class="nf">ExampleDisplayProvider_Start</span><span class="p">(</span><span class="n">UnitySubsystemHandle</span> <span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sXRStats</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">RegisterStatSource</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
        <span class="n">m_GPUFrameTimeID</span> <span class="o">=</span> <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">RegisterStatDefinition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s">&quot;Example.GPUTime&quot;</span><span class="p">,</span> <span class="n">kUnityXRStatOptionNone</span><span class="p">);</span>
        <span class="n">m_DroppedFrameCountID</span> <span class="o">=</span> <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">RegisterStatDefinition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s">&quot;Example.DroppedFrame&quot;</span><span class="p">,</span> <span class="n">kUnityXRStatOptionNone</span><span class="p">);</span>
        <span class="n">m_WorkThreadStat</span> <span class="o">=</span> <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">RegisterStatDefinition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s">&quot;Example.WorkerThreadStat&quot;</span><span class="p">,</span> <span class="n">kUnityXRStatOptionNone</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">kUnitySubsystemErrorCodeSuccess</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Update stats on the Gfx Thread:</p>
<div class="codehilite"><pre><span></span><span class="k">extern</span> <span class="kt">float</span> <span class="nf">GetLastGPUTime</span><span class="p">();</span> <span class="c1">//provided by your runtime</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ExampleDisplayProvider_GfxThreadCall</span><span class="p">(</span><span class="n">UnitySubsystemHandle</span> <span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">SetStatFloat</span><span class="p">(</span><span class="n">m_GPUFrameTimeID</span><span class="p">,</span> <span class="n">GetLastGPUTime</span><span class="p">());</span>
    <span class="c1">// Do gfx thread things</span>
<span class="p">}</span>
</pre></div>


<p>Update stats on the main thread:</p>
<div class="codehilite"><pre><span></span><span class="k">extern</span> <span class="kt">float</span> <span class="nf">GetDroppedFrameCount</span><span class="p">();</span> <span class="c1">//provided by your runtime</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ExampleDisplayProvider_MainThreadCall</span><span class="p">(</span><span class="n">UnitySubsystemHandle</span> <span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">SetStatFloat</span><span class="p">(</span><span class="n">m_DroppedFrameCountID</span><span class="p">,</span> <span class="n">GetDroppedFrameCount</span><span class="p">());</span>
    <span class="c1">// Do main thread things</span>
<span class="p">}</span>
</pre></div>


<p>Update stats on your own threads, but be sure to call <code>IncrementStatFrame</code> to keep the current frame for that thread in sync with the other threads (this is managed internally for the main and graphics threads):</p>
<div class="codehilite"><pre><span></span><span class="k">extern</span> <span class="kt">float</span> <span class="nf">GetWorkerThreadStat</span><span class="p">();</span> <span class="c1">//provided by your runtime</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ExampleDisplayProvider_MyWorkerThread</span><span class="p">(</span><span class="n">UnitySubsystemHandle</span> <span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">IncrementStatFrame</span><span class="p">();</span>
    <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">SetStatFloat</span><span class="p">(</span><span class="n">m_WorkThreadStat</span><span class="p">,</span> <span class="n">GetWorkerThreadStat</span><span class="p">());</span>
    <span class="c1">// Do worker thread things</span>
<span class="p">}</span>
</pre></div>


<p>Unregister the stat source when the subsystem stops:</p>
<div class="codehilite"><pre><span></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">ExampleDisplayProvider_Stop</span><span class="p">(</span><span class="n">UnitySubsystemHandle</span> <span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sXRStats</span><span class="o">-&gt;</span><span class="n">UnregisterStatSource</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<h2 id="thread-safety">Thread safety<a class="headerlink" href="#thread-safety" title="Permanent link">&para;</a></h2>
<p>Updating stats via <code>SetStatFloat</code> is thread safe. However, registering and unregistering stat sources is not thread safe and should only be done on the main thread during the Start and Stop functions of the stat source&rsquo;s lifecycle.</p>
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<p>The queue size for processing stats is 2000. The queue is shared amongst all threads and all subsystems and is only serviced upon frame completion. For this reason, it is recommended to keep the number of calls to <code>SetStatFloat</code> to a conservative level to avoid filling up the queue.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any stat recorded when the queue is full will be lost. </p>
</div>
<h2 id="exposing-stats-to-users">Exposing stats to users<a class="headerlink" href="#exposing-stats-to-users" title="Permanent link">&para;</a></h2>
<p>In the <code>UnityEngine.XR.Provider</code> namespace, use <code>public static bool TryGetStat(Experimental.IntegratedSubsystem xrSubsystem, string tag, out float value)</code> to get stats registered and updated with your Provider. </p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">UnityEngine.XR.Provider</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.Experimental.XR</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.Experimental</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ExampleProviderStats</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">float</span> <span class="nf">GPUFrameTime</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="n">XRStats</span><span class="p">.</span><span class="n">TryGetStat</span><span class="p">(</span><span class="n">GetFirstDisplaySubsystem</span><span class="p">(),</span> <span class="s">&quot;Example.GPUTime&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">tmp</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span> <span class="nf">DroppedFrameCount</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="n">XRStats</span><span class="p">.</span><span class="n">TryGetStat</span><span class="p">(</span><span class="n">GetFirstDisplaySubsystem</span><span class="p">(),</span> <span class="s">&quot;Example.DroppedFrame&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">tmp</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">float</span> <span class="nf">MyWorkerThreadStat</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="n">XRStats</span><span class="p">.</span><span class="n">TryGetStat</span><span class="p">(</span><span class="n">GetFirstDisplaySubsystem</span><span class="p">(),</span> <span class="s">&quot;Example.WorkerThreadStat&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">tmp</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// etc...</span>
    <span class="k">private</span> <span class="k">static</span> <span class="n">IntegratedSubsystem</span> <span class="nf">GetFirstDisplaySubsystem</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">XRDisplaySubsystem</span><span class="p">&gt;</span> <span class="n">displays</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">XRDisplaySubsystem</span><span class="p">&gt;();</span>
        <span class="n">SubsystemManager</span><span class="p">.</span><span class="n">GetInstances</span><span class="p">(</span><span class="n">displays</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">displays</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;No display subsystem found.&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">displays</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Writing public accessor methods such as the example above can help users acquire stats without the need to sift through Provider documentation and find the subsystem with which stats are registered. </p>
<p>Additionally, some subsystems have pre-defined stat tags. Your provider can provide stats for the <a href="https://docs.unity3d.com/ScriptReference/XR.XRStats.html">predefined stats APIs</a> that Unity exposes by registering subsystem specific stat tags (for example: <code>Headers/XR/UnityXRDisplayStats.h</code>).</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../preinit/known-issues.html" title="Known issues" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Known issues
              </span>
            </div>
          </a>
        
        
          <a href="changelog.html" title="Stats Changelog" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Stats Changelog
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../img/toggle.js"></script>
      
    
    
      
    
  </body>
</html>